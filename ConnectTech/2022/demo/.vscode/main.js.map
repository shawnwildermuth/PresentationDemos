{"version":3,"file":"main.js","sources":["../../src/api.js","../../src/results.js","../../src/menu.js","../../src/main.js"],"sourcesContent":["const baseUrl = \"https://bechdel.azurewebsites.net/api/\";\r\nconst pageSize = 12;\r\nasync function getAll(page, year) {\r\n  let response;\r\n  if (year) {\r\n    response = await fetch(getUrl(`films/${year}/?page=${page}&pageSize=${pageSize}`));\r\n  } else {\r\n    response = await fetch(getUrl(`films/?page=${page}&pageSize=${pageSize}`));\r\n  }\r\n  return await response.json();\r\n};\r\n\r\nasync function getPassed(page, year) {\r\n  let response;\r\n  if (year) {\r\n    response = await fetch(getUrl(`films/passed/${year}/?page=${page}&pageSize=${pageSize}`));\r\n  } else {\r\n    response = await fetch(getUrl(`films/passed/?page=${page}&pageSize=${pageSize}`));\r\n  }\r\n  return await response.json();\r\n};\r\n\r\nasync function getFailed(page, year) {\r\n  let response;\r\n  if (year) {\r\n    response = await fetch(getUrl(`films/failed/${year}/?page=${page}&pageSize=${pageSize}`));\r\n  } else {\r\n    response = await fetch(getUrl(`films/failed/?page=${page}&pageSize=${pageSize}`));\r\n  }\r\n  return await response.json();\r\n};\r\n\r\nasync function getYears(page, year) {\r\n  const response = await fetch(getUrl(`years`));\r\n  return await response.json();\r\n};\r\n\r\nfunction getUrl(path) {\r\n  if (path[0] === \"/\") throw error(\"Path must start without the /\");\r\n  return `${baseUrl}${path}`;\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  getPassed,\r\n  getFailed,\r\n  getYears\r\n}\r\n","import api from \"./api.js\";\r\n\r\nconst resultsPane = document.getElementById(\"results\");\r\nconst yearSelect = document.getElementById(\"year-select\");\r\nconst prevPage = document.getElementById(\"prev-page\");\r\nconst nextPage = document.getElementById(\"next-page\");\r\n\r\nexport const Categories = {\r\n  None: Symbol(\"NONE\"),\r\n  All: Symbol(\"ALL\"),\r\n  Passed: Symbol(\"PASSED\"),\r\n  Failed: Symbol(\"FAILED\"),\r\n};\r\n\r\nconst status = {\r\n  category: Categories.None,\r\n  page: 1,\r\n  pages: 0,\r\n  total: 0,\r\n  currentYear: null\r\n};\r\n\r\nyearSelect.addEventListener(\"change\", async (e) => {\r\n  await getResults();\r\n});\r\n\r\nprevPage.addEventListener(\"click\", async (e) => {\r\n  status.page--;\r\n  await getResults();\r\n});\r\n\r\nnextPage.addEventListener(\"click\", async (e) => {\r\n  status.page++;\r\n  await getResults();\r\n});\r\n\r\nfunction renderFilms(response) {\r\n  resultsPane.innerHTML = \"\";\r\n  const filmDivs = [];\r\n  for (let film of response.results) {\r\n    filmDivs.push(formatFilm(film));\r\n  }\r\n  resultsPane.innerHTML = filmDivs.join(\"\");\r\n}\r\n\r\nasync function fillSelect() {\r\n\r\n  // Fill the year dropdown on first call (Always All and all years)\r\n  if (yearSelect.options.length === 0) {\r\n    const years = await api.getYears();\r\n    for (year of [\"All Years\", ...years]) {\r\n      yearSelect.add(new Option(year, year == \"All Years\" ? null : Number(year)));\r\n    }\r\n  }\r\n}\r\n\r\nasync function getResults(category) {\r\n  await fillSelect();\r\n  let response;\r\n\r\n  // default to last used\r\n  if (!category) category = status.category;\r\n\r\n  // If it's changed, update the status.\r\n  const selectedYear = yearSelect.value == \"null\" ? null : Number(yearSelect.value);\r\n  if (status.category != category || selectedYear != status.currentYear) {\r\n    if (category) status.category = category;\r\n    status.page = 1;\r\n    status.currentYear = selectedYear;\r\n  }\r\n\r\n\r\n  // Load the data\r\n  if (category === Categories.All) {\r\n    response = await api.getAll(status.page, status.currentYear);\r\n  } else if (category === Categories.Failed) {\r\n    response = await api.getFailed(status.page, status.currentYear);\r\n  } else if (category === Categories.Passed) {\r\n    response = await api.getPassed(status.page, status.currentYear);\r\n  } else {\r\n    console.error(\"Bad Category Used...\");\r\n  }\r\n\r\n  status.pageCount = response.pageCount;\r\n  status.count = response.count;\r\n\r\n  renderFilms(response);\r\n  enablePaging();\r\n}\r\n\r\nfunction enablePaging() {\r\n  if (status.page == 1) prevPage.classList.add(\"hidden\")\r\n  else prevPage.classList.remove(\"hidden\")\r\n  if (status.page >= status.pageCount) nextPage.classList.add(\"hidden\")\r\n  else nextPage.classList.remove(\"hidden\")\r\n}\r\n\r\nfunction formatFilm(film) {\r\n  return `<div class=\"border rounded m-1 p-1 border-black\">\r\n    <img src=\"${film.posterUrl}\" alt=\"${film.title}\" />\r\n    <div class=\"\">${film.title}</div>\r\n    <div class=\"\">${film.year}</div>\r\n    <div class=\"\">${film.rating}</div>\r\n    <div class=\"\">Passed: ${film.passed}</div>\r\n    <div class=\"\">Reason: ${film.reason}</div>\r\n    <div class=\"\">Budget: $${film.budget.toLocaleString(\"en-US\")}</div>\r\n    <div class=\"\">Domestic Gross: $${film.domesticGross.toLocaleString(\r\n      \"en-US\"\r\n    )}</div>\r\n    <div class=\"info\">International Gross: $${film.internationalGross.toLocaleString(\r\n      \"en-US\"\r\n    )}</div>\r\n    <p>${film.overview}</p>\r\n  </div>`;\r\n}\r\n\r\nexport const loadAll = async () => await getResults(Categories.All);\r\nexport const loadPassed = async () => await getResults(Categories.Passed);\r\nexport const loadFailed = async () => await getResults(Categories.Failed);\r\n","import { loadAll, loadFailed, loadPassed, Categories } from \"./results\";\r\n\r\nconst allMenu = document.getElementById(\"menu-all\");\r\nconst passMenu = document.getElementById(\"menu-pass\");\r\nconst failMenu = document.getElementById(\"menu-fail\");\r\n\r\nexport default function () {\r\n  allMenu.addEventListener(\"click\", async () => {\r\n    await loadAll();\r\n    updateMenu(Categories.All);\r\n  });\r\n  passMenu.addEventListener(\"click\", async () => {\r\n    await loadPassed();\r\n    updateMenu(Categories.Passed);\r\n  });\r\n  failMenu.addEventListener(\"click\", async () => {\r\n    await loadFailed();\r\n    updateMenu(Categories.Failed);\r\n  });\r\n}\r\n\r\nfunction updateMenu(category) {\r\n  const process = (menuItem, selected) => {\r\n    if (!selected) menuItem.classList.remove(\"selected\");\r\n    else {\r\n      if (!menuItem.classList.contains(\"selected\")) menuItem.classList.add(\"selected\");\r\n    }\r\n  };\r\n\r\n  process(allMenu, category === Categories.All);\r\n  process(passMenu, category === Categories.Passed);\r\n  process(failMenu, category === Categories.Failed);\r\n}\r\n","import { loadAll } from \"./results.js\";\r\nimport initMenu from \"./menu\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async (e) => {\r\n  initMenu();\r\n  await loadAll();\r\n});\r\n"],"names":[],"mappings":"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"}